# Core API ‚Äî –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫

**–í–µ—Ä—Å–∏—è:** 1.2.0  
**–§–∞–π–ª:** `modia/core.js`  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** jQuery 3.5.1+ (–≥–ª–æ–±–∞–ª—å–Ω–æ)

---

## üì¶ –≠–∫—Å–ø–æ—Ä—Ç

```javascript
import { BaseComponent, Container, ComponentScanner, container } from '../modia/core.js';
```

---

## üî∑ BaseComponent

–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ Modia.

### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

```javascript
class MyComponent extends BaseComponent {
  static get componentName() {
    return 'my-component';
  }
  
  constructor(element) {
    super(element);
    // this.config –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω
  }
}
```

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|--------------|----------|
| `element` | `HTMLElement` | ‚úÖ –î–∞ | DOM-—ç–ª–µ–º–µ–Ω—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ |

### –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞

| –°–≤–æ–π—Å—Ç–≤–æ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|----------|
| `componentName` | `string` | –ò–º—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –¥–ª—è –ø—Ä–µ—Ñ–∏–∫—Å–∞ data-–∞—Ç—Ä–∏–±—É—Ç–æ–≤ |

### –ú–µ—Ç–æ–¥—ã —ç–∫–∑–µ–º–ø–ª—è—Ä–∞

| –ú–µ—Ç–æ–¥ | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------------|----------|
| `extractConfig()` | `Object` | –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ data-–∞—Ç—Ä–∏–±—É—Ç–æ–≤ |
| `_on(event, selectorOrHandler, handler)` | `this` | –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è |
| `_off(event)` | `this` | –£–¥–∞–ª—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏—è |
| `setContainer(container)` | `void` | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä |
| `onStateChange(newState)` | `void` | –•—É–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è |
| `destroy()` | `void` | –£–Ω–∏—á—Ç–æ–∂–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç |

### –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã

| –ú–µ—Ç–æ–¥ | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------------|----------|
| `fromElement(element)` | `BaseComponent\|undefined` | –ü–æ–ª—É—á–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–∑ DOM-—ç–ª–µ–º–µ–Ω—Ç–∞ |

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ data-–∞—Ç—Ä–∏–±—É—Ç–æ–≤

```html
<form data-component="validation" 
      data-validation-live="true" 
      data-validation-debounce="300">
```

```javascript
// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:
this.config = {
  live: true,        // boolean (–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∏–∑ "true")
  debounce: 300      // number (–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∏–∑ "300")
};
```

| –¢–∏–ø –∑–Ω–∞—á–µ–Ω–∏—è | –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è |
|--------------|-------------|
| `"true"` | `boolean` ‚Üí `true` |
| `"false"` | `boolean` ‚Üí `false` |
| `"-?\d+"` | `number` ‚Üí `parseInt()` |
| –û—Å—Ç–∞–ª—å–Ω–æ–µ | `string` |

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è–º–∏

```javascript
// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –∞–≤—Ç–æ-–ø—Ä–∏–≤—è–∑–∫–æ–π this
this._on('click', this.handleClick);
this._on('submit', 'button', this.handleSubmit);

// –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
this._off();
```

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª

```javascript
class MyComponent extends BaseComponent {
  constructor(element) {
    super(element);
    // 1. –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
    // 2. this.$el.data('modia-component', this)
    // 3. ComponentScanner.registerInstance(this)
  }
  
  destroy() {
    // 1. this.$el.off('.modia')
    // 2. this.$el.removeData('modia-component')
    // 3. ComponentScanner.unregisterInstance(this)
    super.destroy();
  }
}
```

---

## üî∑ Container

Singleton –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º.

### –≠–∫–∑–µ–º–ø–ª—è—Ä

```javascript
import { container } from '../modia/core.js';
```

### –ú–µ—Ç–æ–¥—ã

| –ú–µ—Ç–æ–¥ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----------|------------|----------|
| `setState(newState)` | `Object` | `void` | –û–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —É–≤–µ–¥–æ–º–ª—è–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã |
| `addComponent(component)` | `BaseComponent` | `void` | –î–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä |
| `removeComponent(component)` | `BaseComponent` | `void` | –£–¥–∞–ª—è–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ |
| `destroy()` | ‚Äî | `void` | –£–Ω–∏—á—Ç–æ–∂–∞–µ—Ç –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã |

### –ü—Ä–∏–º–µ—Ä

```javascript
// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
container.setState({ formMode: 'cross' });

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—Ç onStateChange(newState)
```

---

## üî∑ ComponentScanner

–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Å –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

### –°–≤–æ–π—Å—Ç–≤–∞

| –°–≤–æ–π—Å—Ç–≤–æ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|----------|
| `components` | `Object` | –†–µ–µ—Å—Ç—Ä –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ |
| `instances` | `Array` | –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ (–æ—Ç–ª–∞–¥–∫–∞) |

### –ú–µ—Ç–æ–¥—ã

| –ú–µ—Ç–æ–¥ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----------|------------|----------|
| `register(ComponentClass)` | `Class` | `void` | –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –∫–ª–∞—Å—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ |
| `scan(root)` | `HTMLElement\|Document` | `Array` | –°–∫–∞–Ω–∏—Ä—É–µ—Ç DOM –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ |
| `registerInstance(instance)` | `BaseComponent` | `void` | –î–æ–±–∞–≤–ª—è–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –≤ —Ä–µ–µ—Å—Ç—Ä |
| `unregisterInstance(instance)` | `BaseComponent` | `void` | –£–¥–∞–ª—è–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –∏–∑ —Ä–µ–µ—Å—Ç—Ä–∞ |

### –ü—Ä–∏–º–µ—Ä

```javascript
// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
ComponentScanner.register(MyComponent);

// –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ DOM
const instances = ComponentScanner.scan();

// –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–ø–æ—Å–ª–µ AJAX)
const instances = ComponentScanner.scan($('#modal')[0]);
```

---

## üîå –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è jQuery

| –°–æ–±—ã—Ç–∏–µ | –ö–æ–≥–¥–∞ | –î–∞–Ω–Ω—ã–µ |
|---------|-------|--------|
| `modia:initialized` | –ü–æ—Å–ª–µ –∞–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ | `{ instances: [...] }` |
| `modia:scanned` | –ü–æ—Å–ª–µ `scan()` | `{ instances: [...], root: ... }` |
| `modia:component-created` | –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ | `{ component: ... }` |
| `modia:component-destroyed` | –ü–æ—Å–ª–µ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ | `{ component: ... }` |

### –ü–æ–¥–ø–∏—Å–∫–∞

```javascript
$(document).on('modia:initialized', (e, data) => {
  console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ:', data.instances.length);
});

$(document).on('modia:component-created', (e, data) => {
  console.log('–°–æ–∑–¥–∞–Ω:', data.component.constructor.name);
});
```

---

## üìö –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| [index.md](./index.md) | Index ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ |
| [logger.md](./logger.md) | Logger ‚Äî —Å–µ—Ä–≤–∏—Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è |
| [ARCHITECTURE.md](../ARCHITECTURE.md) | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã |

---

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

| –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ | –ü–ª–∞–Ω |
|-------------|------|
| –ù–µ—Ç EventBus | ‚è≥ v1.3+ |
| –ù–µ—Ç LocalContainer | ‚è≥ v1.3+ |
| –ù–µ—Ç —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è | ‚è≥ v1.3+ |

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2026-02-19  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω–æ (v1.2)

