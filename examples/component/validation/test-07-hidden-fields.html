<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Modia ‚Äî –¢–µ—Å—Ç ValidationComponent (–°–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—è)</title>

  <!-- ‚úÖ jQuery CDN (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û) -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

  <!-- ‚úÖ Bootstrap 4 CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

  <!-- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã CSS (2 —É—Ä–æ–≤–Ω—è –≤–≤–µ—Ä—Ö) -->
  <link rel="stylesheet" href="../../examples.css">

  <!-- ‚úÖ Modia CSS (—Å–∫—Ä—ã–≤–∞–µ—Ç —à–∞–±–ª–æ–Ω—ã –æ—à–∏–±–æ–∫) -->
  <link rel="stylesheet" href="../../../modia/modia.css">

  <style>
    .test-form {
      max-width: 500px;
      margin: 20px 0;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }

    .form-status {
      margin-top: 15px;
      padding: 10px;
      border-radius: 3px;
      font-weight: 500;
    }

    .form-status.success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .form-status.error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .form-status.pending {
      background: #fff3cd;
      color: #856404;
      border: 1px solid #ffeeba;
    }

    .console-log-container {
      position: relative;
    }

    .btn-copy-log {
      position: absolute;
      top: 5px;
      right: 5px;
      padding: 2px 8px;
      font-size: 11px;
      z-index: 10;
    }

    .character-selector {
      display: flex;
      gap: 10px;
      margin: 10px 0;
    }

    .character-selector button {
      flex: 1;
    }

    .character-selector button.active {
      background: #007bff;
      color: white;
      border-color: #007bff;
    }

    .hidden-field-info {
      background: #f8f9fa;
      padding: 10px;
      border-radius: 3px;
      font-family: monospace;
      font-size: 12px;
      margin: 10px 0;
    }
  </style>
</head>

<body>
  <div class="container mt-5">
    <h1>üß™ –¢–µ—Å—Ç ValidationComponent</h1>
    <p class="text-muted">–°–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—è ‚Äî —Ä–∞–±–æ—Ç–∞ —Å hidden input + –≤–Ω–µ—à–Ω–∏–π —ç–∫—Ä–∞–Ω –æ—à–∏–±–∫–∏</p>

    <!-- ============================================================ -->
    <!-- –°–ï–ö–¶–ò–Ø 1: –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ + –≤–Ω–µ—à–Ω–∏–π —ç–∫—Ä–∞–Ω –æ—à–∏–±–∫–∏ -->
    <!-- ============================================================ -->
    <div class="test-section">
      <h3>üìç –°–µ–∫—Ü–∏—è 1: –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ + –≤–Ω–µ—à–Ω–∏–π —ç–∫—Ä–∞–Ω –æ—à–∏–±–∫–∏</h3>

      <div class="expected-result">
        <h4>‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</h4>
        <ul>
          <li>–°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ (<code>type="hidden"</code>) –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è</li>
          <li>–û—à–∏–±–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –≤–∏–¥–∏–º–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ (<code>data-input-error-screen</code>)</li>
          <li>–í—ã–±–æ—Ä –∑–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ UI ‚Üí –æ—à–∏–±–∫–∞ –∏—Å—á–µ–∑–∞–µ—Ç</li>
          <li>–û—á–∏—Å—Ç–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è ‚Üí –æ—à–∏–±–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–Ω–æ–≤–∞</li>
        </ul>
      </div>

      <div class="instruction-box">
        <strong>üìã –†—É—á–Ω–æ–π —Ç–µ—Å—Ç:</strong><br>
        1. –ù–∞–∂–º–∏—Ç–µ <code>üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å</code> ‚Üí –æ—à–∏–±–∫–∞ –Ω–∞ –≤–∏–¥–∏–º–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ<br>
        2. –í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ ‚Üí –æ—à–∏–±–∫–∞ –∏—Å—á–µ–∑–Ω–µ—Ç<br>
        3. –ù–∞–∂–º–∏—Ç–µ <code>üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å</code> ‚Üí —É—Å–ø–µ—Ö<br>
        4. –ù–∞–∂–º–∏—Ç–µ <code>üóëÔ∏è –°–±—Ä–æ—Å–∏—Ç—å –≤—ã–±–æ—Ä</code> ‚Üí –æ—à–∏–±–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è —Å–Ω–æ–≤–∞
      </div>

      <form id="form-hidden-1" data-component="validation" class="test-form">
        <div class="form-group">
          <label>–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ *</label>
          <div id="character-selector" class="character-selector">
            <button type="button" class="btn btn-outline-primary" data-select="1">
              üêª –ß–µ–±—É—Ä–∞—à–∫–∞
            </button>
            <button type="button" class="btn btn-outline-primary" data-select="2">
              üêä –ö—Ä–æ–∫–æ–¥–∏–ª –ì–µ–Ω–∞
            </button>
            <button type="button" class="btn btn-outline-primary" data-select="3">
              üëµ –®–∞–ø–æ–∫–ª—è–∫
            </button>
          </div>

          <!-- –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ —Å –≤–Ω–µ—à–Ω–∏–º —ç–∫—Ä–∞–Ω–æ–º –æ—à–∏–±–∫–∏ -->
          <input type="hidden" id="character_id" name="character_id" required
            data-input-error-screen="#character-selector">

          <small class="text-muted">–°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ, –æ—à–∏–±–∫–∞ –Ω–∞ #character-selector</small>
        </div>

        <div class="error-templates">
          <span class="text-danger" data-rule="required">–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</span>
        </div>

        <div class="form-group mt-3">
          <button type="submit" class="btn btn-primary btn-sm">üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å</button>
          <button type="button" class="btn btn-outline-danger btn-sm" id="btn-reset-character">
            üóëÔ∏è –°–±—Ä–æ—Å–∏—Ç—å –≤—ã–±–æ—Ä
          </button>
          <button type="button" class="btn btn-info btn-sm" id="btn-check-character-value">
            üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
          </button>
        </div>
      </form>

      <div id="form-hidden-1-status" class="form-status pending">–°—Ç–∞—Ç—É—Å: –û–∂–∏–¥–∞–Ω–∏–µ...</div>
      <div id="character-value-output" class="hidden-field-info">–ó–Ω–∞—á–µ–Ω–∏–µ: (–æ–∂–∏–¥–∞–Ω–∏–µ)</div>

      <div class="test-buttons mt-3">
        <button class="btn btn-success" id="btn-auto-test-section-1">
          ‚ñ∂Ô∏è –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 1
        </button>
      </div>

      <div id="test-result-1" class="test-result pending">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
    </div>

    <!-- ============================================================ -->
    <!-- –°–ï–ö–¶–ò–Ø 2: –í–∏–¥–∏–º—ã–π —ç–ª–µ–º–µ–Ω—Ç + –≤–Ω–µ—à–Ω–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∑–Ω–∞—á–µ–Ω–∏—è -->
    <!-- ============================================================ -->
    <div class="test-section">
      <h3>üìç –°–µ–∫—Ü–∏—è 2: –í–∏–¥–∏–º—ã–π —ç–ª–µ–º–µ–Ω—Ç + –≤–Ω–µ—à–Ω–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∑–Ω–∞—á–µ–Ω–∏—è</h3>

      <div class="expected-result">
        <h4>‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</h4>
        <ul>
          <li>–í–∏–¥–∏–º—ã–π —ç–ª–µ–º–µ–Ω—Ç (<code>div</code>) –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –æ—à–∏–±–∫—É</li>
          <li>–ó–Ω–∞—á–µ–Ω–∏–µ –±–µ—Ä—ë—Ç—Å—è –∏–∑ —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è (<code>data-input-value-source</code>)</li>
          <li>–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è ‚Üí –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç</li>
          <li>–û–±–∞ —Å–ø–æ—Å–æ–±–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ</li>
        </ul>
      </div>

      <div class="instruction-box">
        <strong>üìã –†—É—á–Ω–æ–π —Ç–µ—Å—Ç:</strong><br>
        1. –ù–∞–∂–º–∏—Ç–µ <code>üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å</code> ‚Üí –æ—à–∏–±–∫–∞ –Ω–∞ –≤–∏–¥–∏–º–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ<br>
        2. –í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ ‚Üí –Ω–∞–∂–º–∏—Ç–µ <code>üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å</code> ‚Üí —É—Å–ø–µ—Ö<br>
        3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ <code>üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ</code>
      </div>

      <form id="form-hidden-2" data-component="validation" class="test-form">
        <div class="form-group">
          <label>–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è *</label>
          <!-- –í–∏–¥–∏–º—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å –≤–Ω–µ—à–Ω–∏–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –∑–Ω–∞—á–µ–Ω–∏—è -->
          <div id="code-display" data-input-value-source="#code-hidden" class="border p-2 rounded"
            style="min-height: 38px;">
            (–∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è)
          </div>

          <!-- –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ –∑–Ω–∞—á–µ–Ω–∏—è -->
          <input type="hidden" id="code-hidden" name="confirmation_code" required>

          <small class="text-muted">–í–∏–¥–∏–º—ã–π div, –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ #code-hidden</small>
        </div>

        <div class="form-group mt-2">
          <input type="text" id="code-input-temp" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –¥–ª—è —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è">
          <button type="button" class="btn btn-secondary btn-sm mt-2" id="btn-set-code">
            üìù –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–¥
          </button>
        </div>

        <div class="error-templates">
          <span class="text-danger" data-rule="required">–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</span>
        </div>

        <div class="form-group mt-3">
          <button type="submit" class="btn btn-primary btn-sm">üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å</button>
          <button type="button" class="btn btn-info btn-sm" id="btn-check-code-value">
            üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
          </button>
        </div>
      </form>

      <div id="form-hidden-2-status" class="form-status pending">–°—Ç–∞—Ç—É—Å: –û–∂–∏–¥–∞–Ω–∏–µ...</div>
      <div id="code-value-output" class="hidden-field-info">–ó–Ω–∞—á–µ–Ω–∏–µ: (–æ–∂–∏–¥–∞–Ω–∏–µ)</div>

      <div class="test-buttons mt-3">
        <button class="btn btn-success" id="btn-auto-test-section-2">
          ‚ñ∂Ô∏è –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 2
        </button>
      </div>

      <div id="test-result-2" class="test-result pending">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
    </div>

    <!-- ============================================================ -->
    <!-- –°–ï–ö–¶–ò–Ø 3: –ö–æ–º–±–∏–Ω–∞—Ü–∏—è —Å–ø–æ—Å–æ–±–æ–≤ -->
    <!-- ============================================================ -->
    <div class="test-section">
      <h3>üìç –°–µ–∫—Ü–∏—è 3: –ö–æ–º–±–∏–Ω–∞—Ü–∏—è —Å–ø–æ—Å–æ–±–æ–≤ (–æ–±–∞ –∞—Ç—Ä–∏–±—É—Ç–∞)</h3>

      <div class="expected-result">
        <h4>‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</h4>
        <ul>
          <li>–û–¥–Ω–æ –ø–æ–ª–µ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –æ–±–∞ –∞—Ç—Ä–∏–±—É—Ç–∞</li>
          <li><code>data-input-error-screen</code> –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è –æ—à–∏–±–∫–∏</li>
          <li><code>data-input-value-source</code> –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏—è</li>
          <li>–í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ</li>
        </ul>
      </div>

      <div class="instruction-box">
        <strong>üìã –†—É—á–Ω–æ–π —Ç–µ—Å—Ç:</strong><br>
        1. –ù–∞–∂–º–∏—Ç–µ <code>üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å</code> ‚Üí –æ—à–∏–±–∫–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –æ—à–∏–±–∫–∏<br>
        2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Üí –æ—à–∏–±–∫–∞ –∏—Å—á–µ–∑–Ω–µ—Ç<br>
        3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ <code>üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ</code>
      </div>

      <form id="form-hidden-3" data-component="validation" class="test-form">
        <div class="form-group">
          <label>–°–µ–∫—Ä–µ—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ *</label>

          <!-- –≠–∫—Ä–∞–Ω –æ—à–∏–±–∫–∏ -->
          <div id="secret-error-screen" class="border p-2 rounded mb-2">
            (–æ—à–∏–±–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∑–¥–µ—Å—å)
          </div>

          <!-- –í–∏–¥–∏–º—ã–π —ç–ª–µ–º–µ–Ω—Ç -->
          <div id="secret-display" data-input-value-source="#secret-hidden"
            data-input-error-screen="#secret-error-screen" class="border p-2 rounded" style="min-height: 38px;">
            (–∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è)
          </div>

          <!-- –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ -->
          <input type="hidden" id="secret-hidden" name="secret_value" required>

          <small class="text-muted">–û–±–∞ –∞—Ç—Ä–∏–±—É—Ç–∞ –Ω–∞ –æ–¥–Ω–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ</small>
        </div>

        <div class="form-group mt-2">
          <input type="text" id="secret-input-temp" class="form-control"
            placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è">
          <button type="button" class="btn btn-secondary btn-sm mt-2" id="btn-set-secret">
            üìù –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
          </button>
        </div>

        <div class="error-templates">
          <span class="text-danger" data-rule="required">–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–µ–∫—Ä–µ—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ</span>
        </div>

        <div class="form-group mt-3">
          <button type="submit" class="btn btn-primary btn-sm">üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å</button>
          <button type="button" class="btn btn-info btn-sm" id="btn-check-secret-value">
            üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
          </button>
        </div>
      </form>

      <div id="form-hidden-3-status" class="form-status pending">–°—Ç–∞—Ç—É—Å: –û–∂–∏–¥–∞–Ω–∏–µ...</div>
      <div id="secret-value-output" class="hidden-field-info">–ó–Ω–∞—á–µ–Ω–∏–µ: (–æ–∂–∏–¥–∞–Ω–∏–µ)</div>

      <div class="test-buttons mt-3">
        <button class="btn btn-success" id="btn-auto-test-section-3">
          ‚ñ∂Ô∏è –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 3
        </button>
      </div>

      <div id="test-result-3" class="test-result pending">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
    </div>

    <!-- ============================================================ -->
    <!-- –ö–û–ù–°–û–õ–¨ –õ–û–ì–ì–ï–†–ê -->
    <!-- ============================================================ -->
    <div class="test-section">
      <h3>üìã –ö–æ–Ω—Å–æ–ª—å –ª–æ–≥–≥–µ—Ä–∞</h3>

      <div class="console-log-container">
        <button class="btn btn-sm btn-outline-secondary btn-copy-log" id="btn-copy-log">
          üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
        </button>
        <div class="event-log" id="console-log" style="max-height: 300px; overflow-y: auto;">
          <div class="text-muted"><small>[00:00:00] –ö–æ–Ω—Å–æ–ª—å –ª–æ–≥–≥–µ—Ä–∞ –≥–æ—Ç–æ–≤–∞...</small></div>
        </div>
      </div>

      <div class="test-buttons mt-2">
        <button class="btn btn-outline-secondary" id="btn-clear-log">üßπ –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥</button>
      </div>
    </div>

    <!-- ============================================================ -->
    <!-- –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ö–ù–û–ü–ö–ò -->
    <!-- ============================================================ -->
    <div class="test-buttons mt-4">
      <button class="btn btn-success btn-lg" id="btn-auto-test-all">
        ‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ-—Ç–µ—Å—Ç –≤—Å–µ—Ö —Å–µ–∫—Ü–∏–π
      </button>
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="mt-4">
      <a href="test-06-dynamic-fields.html" class="btn btn-outline-secondary">
        ‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–µ—Å—Ç: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è
      </a>
      <a href="test-08-hooks-events.html" class="btn btn-outline-primary">
        ‚Üí –°–ª–µ–¥—É—é—â–∏–π —Ç–µ—Å—Ç: –°–æ–±—ã—Ç–∏—è-—Ö—É–∫–∏
      </a>
    </div>
  </div>

  <!-- ‚úÖ Modia Index (3 —É—Ä–æ–≤–Ω—è –≤–≤–µ—Ä—Ö!) -->
  <script type="module" src="../../../modia/index.js"></script>

  <!-- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç -->
  <script type="module">
    // ============================================================
    // –£–¢–ò–õ–ò–¢–´
    // ============================================================

    let testRunning = false;

    function log(message, type = 'info') {
      const $log = $('#console-log');
      const timestamp = new Date().toLocaleTimeString('ru-RU');
      const color = type === 'error' ? 'text-danger'
        : type === 'success' ? 'text-success'
          : 'text-muted';
      $log.append(`<div class="${color}"><small>[${timestamp}] ${message}</small></div>`);
      $log.scrollTop($log[0].scrollHeight);
      console.log(`[Hidden Fields Test] ${message}`);
    }

    function sleep(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    function setFormStatus(formId, status, message) {
      const $status = $(`#${formId}-status`);
      $status.removeClass('success error pending').addClass(status);
      $status.text(`–°—Ç–∞—Ç—É—Å: ${message}`);
    }

    // ============================================================
    // –ö–û–ü–ò–†–û–í–ê–ù–ò–ï –õ–û–ì–ê –í –ë–£–§–ï–† –û–ë–ú–ï–ù–ê
    // ============================================================

    function copyLogToClipboard() {
      const $log = $('#console-log');
      const lines = [];
      $log.find('div').each(function () {
        lines.push($(this).text().trim());
      });
      const text = lines.join('\n');

      if (!text) {
        log('‚ùå –ù–µ—á–µ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ‚Äî –ª–æ–≥ –ø—É—Å—Ç', 'error');
        return false;
      }

      if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(text).then(() => {
          log('‚úÖ –õ–æ–≥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞', 'success');
          const $btn = $('#btn-copy-log');
          const originalText = $btn.text();
          $btn.text('‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!').prop('disabled', true);
          setTimeout(() => {
            $btn.text(originalText).prop('disabled', false);
          }, 2000);
        }).catch(err => {
          log(`‚ùå –û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: ${err.message}`, 'error');
        });
      } else {
        const $textarea = $('<textarea>').val(text).css({
          position: 'absolute',
          left: '-9999px',
          top: '-9999px'
        }).appendTo('body');

        $textarea[0].select();
        try {
          document.execCommand('copy');
          log('‚úÖ –õ–æ–≥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω (fallback)', 'success');
        } catch (err) {
          log(`‚ùå –û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: ${err.message}`, 'error');
        }
        $textarea.remove();
      }

      return true;
    }

    // ============================================================
    // –°–ï–ö–¶–ò–Ø 1: –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ + –≤–Ω–µ—à–Ω–∏–π —ç–∫—Ä–∞–Ω –æ—à–∏–±–∫–∏
    // ============================================================

    $(document).ready(function () {
      log('DOM –≥–æ—Ç–æ–≤, –æ–∂–∏–¥–∞–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Modia...', 'info');

      setTimeout(function () {
        log('Modia –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω', 'success');

        const $form1 = $('#form-hidden-1');
        const comp1 = $form1.data('modia-component');

        if (comp1) {
          log(`‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞–π–¥–µ–Ω: ${comp1.constructor.name}`, 'success');
        }

        // –í—ã–±–æ—Ä –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
        $('#character-selector [data-select]').on('click', function () {
          const value = $(this).data('select');
          $('#character_id').val(value);

          // –û–±–Ω–æ–≤–ª—è–µ–º UI
          $('#character-selector button').removeClass('active');
          $(this).addClass('active');

          log(`‚úÖ –í—ã–±—Ä–∞–Ω –ø–µ—Ä—Å–æ–Ω–∞–∂: ${value}`, 'success');

          // –ê–≤—Ç–æ-–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞
          if (comp1) {
            comp1.validate();
          }
        });

        // –°–±—Ä–æ—Å –≤—ã–±–æ—Ä–∞
        $('#btn-reset-character').on('click', function () {
          $('#character_id').val('');
          $('#character-selector button').removeClass('active');
          if (comp1) {
            comp1.clearErrors();
            comp1.validate();
          }
          log('üóëÔ∏è –í—ã–±–æ—Ä —Å–±—Ä–æ—à–µ–Ω', 'info');
          setFormStatus('form-hidden-1', 'pending', '–í—ã–±–æ—Ä —Å–±—Ä–æ—à–µ–Ω');
        });

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è
        $('#btn-check-character-value').on('click', function () {
          const value = $('#character_id').val();
          $('#character-value-output').text(`–ó–Ω–∞—á–µ–Ω–∏–µ: ${value || '(–ø—É—Å—Ç–æ)'}`);
          log(`üîç –ó–Ω–∞—á–µ–Ω–∏–µ —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è: ${value || '(–ø—É—Å—Ç–æ)'}`, 'info');
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
        $form1.on('validation:invalid', function (e, data) {
          log(`‚ùå –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: ${data.errors.length} –æ—à–∏–±–æ–∫`, 'error');
          setFormStatus('form-hidden-1', 'error', `–û—à–∏–±–æ–∫: ${data.errors.length}`);
        });

        $form1.on('validation:valid', function () {
          log('‚úÖ –§–æ—Ä–º–∞ –≤–∞–ª–∏–¥–Ω–∞', 'success');
          setFormStatus('form-hidden-1', 'success', '–§–æ—Ä–º–∞ –≤–∞–ª–∏–¥–Ω–∞!');
        });
      }, 500);
    });

    // ============================================================
    // –°–ï–ö–¶–ò–Ø 2: –í–∏–¥–∏–º—ã–π —ç–ª–µ–º–µ–Ω—Ç + –≤–Ω–µ—à–Ω–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∑–Ω–∞—á–µ–Ω–∏—è
    // ============================================================

    $(document).ready(function () {
      setTimeout(function () {
        const $form2 = $('#form-hidden-2');
        const comp2 = $form2.data('modia-component');

        // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–¥
        $('#btn-set-code').on('click', function () {
          const code = $('#code-input-temp').val();
          $('#code-hidden').val(code);
          $('#code-display').text(code || '(–∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è)');
          log(`üìù –ö–æ–¥ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: ${code || '(–ø—É—Å—Ç–æ)'}`, 'info');

          if (comp2) {
            comp2.validate();
          }
        });

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è
        $('#btn-check-code-value').on('click', function () {
          const value = $('#code-hidden').val();
          $('#code-value-output').text(`–ó–Ω–∞—á–µ–Ω–∏–µ: ${value || '(–ø—É—Å—Ç–æ)'}`);
          log(`üîç –ó–Ω–∞—á–µ–Ω–∏–µ —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è: ${value || '(–ø—É—Å—Ç–æ)'}`, 'info');
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
        $form2.on('validation:invalid', function (e, data) {
          setFormStatus('form-hidden-2', 'error', `–û—à–∏–±–æ–∫: ${data.errors.length}`);
        });

        $form2.on('validation:valid', function () {
          setFormStatus('form-hidden-2', 'success', '–§–æ—Ä–º–∞ –≤–∞–ª–∏–¥–Ω–∞!');
        });
      }, 500);
    });

    // ============================================================
    // –°–ï–ö–¶–ò–Ø 3: –ö–æ–º–±–∏–Ω–∞—Ü–∏—è —Å–ø–æ—Å–æ–±–æ–≤
    // ============================================================

    $(document).ready(function () {
      setTimeout(function () {
        const $form3 = $('#form-hidden-3');
        const comp3 = $form3.data('modia-component');

        // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
        $('#btn-set-secret').on('click', function () {
          const value = $('#secret-input-temp').val();
          $('#secret-hidden').val(value);
          $('#secret-display').text(value || '(–∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è)');
          log(`üìù –ó–Ω–∞—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ: ${value || '(–ø—É—Å—Ç–æ)'}`, 'info');

          if (comp3) {
            comp3.validate();
          }
        });

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è
        $('#btn-check-secret-value').on('click', function () {
          const value = $('#secret-hidden').val();
          $('#secret-value-output').text(`–ó–Ω–∞—á–µ–Ω–∏–µ: ${value || '(–ø—É—Å—Ç–æ)'}`);
          log(`üîç –ó–Ω–∞—á–µ–Ω–∏–µ —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è: ${value || '(–ø—É—Å—Ç–æ)'}`, 'info');
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
        $form3.on('validation:invalid', function (e, data) {
          setFormStatus('form-hidden-3', 'error', `–û—à–∏–±–æ–∫: ${data.errors.length}`);
        });

        $form3.on('validation:valid', function () {
          setFormStatus('form-hidden-3', 'success', '–§–æ—Ä–º–∞ –≤–∞–ª–∏–¥–Ω–∞!');
        });
      }, 500);
    });

    // ============================================================
    // –ê–í–¢–û-–¢–ï–°–¢ –°–ï–ö–¶–ò–ò 1
    // ============================================================

    $('#btn-auto-test-section-1').on('click', async function () {
      if (testRunning) return;
      testRunning = true;

      const $btn = $(this);
      $btn.prop('disabled', true).text('‚è≥ –¢–µ—Å—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...');

      try {
        log('=== –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 1: –ù–∞—á–∞–ª–æ ===', 'info');

        const comp1 = $('#form-hidden-1').data('modia-component');

        // –®–∞–≥ 1: –ü—É—Å—Ç–æ–µ —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ ‚Üí –æ—à–∏–±–∫–∞
        log('–®–∞–≥ 1: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç–æ–≥–æ —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è...', 'info');
        $('#character_id').val('');
        $('#character-selector button').removeClass('active');
        if (comp1) comp1.clearErrors();
        await sleep(300);

        const isValid1 = comp1.validate();
        if (!isValid1) {
          log('‚úÖ –®–∞–≥ 1: –û—à–∏–±–∫–∞ –Ω–∞ —Å–∫—Ä—ã—Ç–æ–º –ø–æ–ª–µ', 'success');
        } else {
          throw new Error('–ü—É—Å—Ç–æ–µ —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ–≤–∞–ª–∏–¥–Ω–æ');
        }

        await sleep(500);

        // –®–∞–≥ 2: –í—ã–±—Ä–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ ‚Üí —É—Å–ø–µ—Ö
        log('–®–∞–≥ 2: –í—ã–±–æ—Ä –ø–µ—Ä—Å–æ–Ω–∞–∂–∞...', 'info');
        $('#character-selector [data-select="1"]').click();
        await sleep(300);

        const isValid2 = comp1.validate();
        if (isValid2) {
          log('‚úÖ –®–∞–≥ 2: –í—ã–±—Ä–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–∞–ª–∏–¥–Ω–æ', 'success');
        } else {
          throw new Error('–í—ã–±—Ä–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω–æ');
        }

        await sleep(500);

        // –®–∞–≥ 3: –°–±—Ä–æ—Å ‚Üí –æ—à–∏–±–∫–∞
        log('–®–∞–≥ 3: –°–±—Ä–æ—Å –≤—ã–±–æ—Ä–∞...', 'info');
        $('#btn-reset-character').click();
        await sleep(300);

        const isValid3 = comp1.validate();
        if (!isValid3) {
          log('‚úÖ –®–∞–≥ 3: –ü–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞ –æ—à–∏–±–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è', 'success');
        } else {
          throw new Error('–ü–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞');
        }

        log('=== –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 1: –£—Å–ø–µ—à–Ω–æ ===', 'success');
        $('#test-result-1').removeClass('pending').addClass('pass')
          .text('‚úÖ –ê–≤—Ç–æ-—Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω');

      } catch (error) {
        log(`‚ùå –ê–≤—Ç–æ-—Ç–µ—Å—Ç –ø—Ä–æ–≤–∞–ª–µ–Ω: ${error.message}`, 'error');
        $('#test-result-1').removeClass('pending').addClass('fail')
          .text(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`);
      } finally {
        $btn.prop('disabled', false).text('‚ñ∂Ô∏è –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 1');
        testRunning = false;
      }
    });

    // ============================================================
    // –ê–í–¢–û-–¢–ï–°–¢ –°–ï–ö–¶–ò–ò 2
    // ============================================================

    $('#btn-auto-test-section-2').on('click', async function () {
      if (testRunning) return;
      testRunning = true;

      const $btn = $(this);
      $btn.prop('disabled', true).text('‚è≥ –¢–µ—Å—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...');

      try {
        log('=== –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 2: –ù–∞—á–∞–ª–æ ===', 'info');

        const comp2 = $('#form-hidden-2').data('modia-component');

        // –®–∞–≥ 1: –ü—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Üí –æ—à–∏–±–∫–∞
        log('–®–∞–≥ 1: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è...', 'info');
        $('#code-hidden').val('');
        $('#code-display').text('(–∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è)');
        if (comp2) comp2.clearErrors();
        await sleep(300);

        const isValid1 = comp2.validate();
        if (!isValid1) {
          log('‚úÖ –®–∞–≥ 1: –ü—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –≤–∞–ª–∏–¥–Ω–æ', 'success');
        } else {
          throw new Error('–ü—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ–≤–∞–ª–∏–¥–Ω–æ');
        }

        await sleep(500);

        // –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ ‚Üí —É—Å–ø–µ—Ö
        log('–®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è...', 'info');
        $('#code-input-temp').val('ABC123');
        $('#btn-set-code').click();
        await sleep(300);

        const isValid2 = comp2.validate();
        if (isValid2) {
          log('‚úÖ –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–∞–ª–∏–¥–Ω–æ', 'success');
        } else {
          throw new Error('–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω–æ');
        }

        log('=== –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 2: –£—Å–ø–µ—à–Ω–æ ===', 'success');
        $('#test-result-2').removeClass('pending').addClass('pass')
          .text('‚úÖ –ê–≤—Ç–æ-—Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω');

      } catch (error) {
        log(`‚ùå –ê–≤—Ç–æ-—Ç–µ—Å—Ç –ø—Ä–æ–≤–∞–ª–µ–Ω: ${error.message}`, 'error');
        $('#test-result-2').removeClass('pending').addClass('fail')
          .text(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`);
      } finally {
        $btn.prop('disabled', false).text('‚ñ∂Ô∏è –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 2');
        testRunning = false;
      }
    });

    // ============================================================
    // –ê–í–¢–û-–¢–ï–°–¢ –°–ï–ö–¶–ò–ò 3
    // ============================================================

    $('#btn-auto-test-section-3').on('click', async function () {
      if (testRunning) return;
      testRunning = true;

      const $btn = $(this);
      $btn.prop('disabled', true).text('‚è≥ –¢–µ—Å—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...');

      try {
        log('=== –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 3: –ù–∞—á–∞–ª–æ ===', 'info');

        const comp3 = $('#form-hidden-3').data('modia-component');

        // –®–∞–≥ 1: –ü—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Üí –æ—à–∏–±–∫–∞
        log('–®–∞–≥ 1: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è...', 'info');
        $('#secret-hidden').val('');
        $('#secret-display').text('(–∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è)');
        if (comp3) comp3.clearErrors();
        await sleep(300);

        const isValid1 = comp3.validate();
        if (!isValid1) {
          log('‚úÖ –®–∞–≥ 1: –ü—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –≤–∞–ª–∏–¥–Ω–æ', 'success');
        } else {
          throw new Error('–ü—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ–≤–∞–ª–∏–¥–Ω–æ');
        }

        await sleep(500);

        // –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ ‚Üí —É—Å–ø–µ—Ö
        log('–®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è...', 'info');
        $('#secret-input-temp').val('SECRET_VALUE');
        $('#btn-set-secret').click();
        await sleep(300);

        const isValid2 = comp3.validate();
        if (isValid2) {
          log('‚úÖ –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–∞–ª–∏–¥–Ω–æ', 'success');
        } else {
          throw new Error('–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω–æ');
        }

        log('=== –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 3: –£—Å–ø–µ—à–Ω–æ ===', 'success');
        $('#test-result-3').removeClass('pending').addClass('pass')
          .text('‚úÖ –ê–≤—Ç–æ-—Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω');

      } catch (error) {
        log(`‚ùå –ê–≤—Ç–æ-—Ç–µ—Å—Ç –ø—Ä–æ–≤–∞–ª–µ–Ω: ${error.message}`, 'error');
        $('#test-result-3').removeClass('pending').addClass('fail')
          .text(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`);
      } finally {
        $btn.prop('disabled', false).text('‚ñ∂Ô∏è –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 3');
        testRunning = false;
      }
    });

    // ============================================================
    // –ì–õ–û–ë–ê–õ–¨–ù–´–ô –ê–í–¢–û-–¢–ï–°–¢
    // ============================================================

    $('#btn-auto-test-all').on('click', async function () {
      if (testRunning) return;
      testRunning = true;

      const $btn = $(this);
      $btn.prop('disabled', true).text('‚è≥ –¢–µ—Å—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...');

      log('=== –ì–õ–û–ë–ê–õ–¨–ù–´–ô –ê–í–¢–û-–¢–ï–°–¢: –ù–∞—á–∞–ª–æ ===', 'info');

      await $('#btn-auto-test-section-1').click();
      await sleep(1000);
      await $('#btn-auto-test-section-2').click();
      await sleep(1000);
      await $('#btn-auto-test-section-3').click();

      log('=== –ì–õ–û–ë–ê–õ–¨–ù–´–ô –ê–í–¢–û-–¢–ï–°–¢: –ó–∞–≤–µ—Ä—à—ë–Ω ===', 'success');

      $btn.prop('disabled', false).text('‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ-—Ç–µ—Å—Ç –≤—Å–µ—Ö —Å–µ–∫—Ü–∏–π');
      testRunning = false;
    });

    // ============================================================
    // –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –õ–û–ì–ê
    // ============================================================

    $('#btn-copy-log').on('click', function (e) {
      e.preventDefault();
      copyLogToClipboard();
    });

    $('#btn-clear-log').on('click', function () {
      $('#console-log').html('<div class="text-muted"><small>[00:00:00] –õ–æ–≥ –æ—á–∏—â–µ–Ω</small></div>');
      log('–õ–æ–≥ –æ—á–∏—â–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º', 'info');
    });

    // ============================================================
    // –ì–õ–û–ë–ê–õ–¨–ù–´–ô –û–ë–†–ê–ë–û–¢–ß–ò–ö –û–®–ò–ë–û–ö
    // ============================================================

    window.addEventListener('error', function (e) {
      log(`‚ùå –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞: ${e.message} –≤ ${e.filename}:${e.lineno}`, 'error');
    });

    window.addEventListener('unhandledrejection', function (e) {
      log(`‚ùå –ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è Promise-–æ—à–∏–±–∫–∞: ${e.reason}`, 'error');
    });
  </script>
</body>

</html>