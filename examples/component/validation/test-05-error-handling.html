<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Modia ‚Äî –¢–µ—Å—Ç ValidationComponent (–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫)</title>

  <!-- ‚úÖ jQuery CDN (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û) -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

  <!-- ‚úÖ Bootstrap 4 CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

  <!-- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã CSS (2 —É—Ä–æ–≤–Ω—è –≤–≤–µ—Ä—Ö) -->
  <link rel="stylesheet" href="../../examples.css">

  <!-- ‚úÖ Modia CSS (—Å–∫—Ä—ã–≤–∞–µ—Ç —à–∞–±–ª–æ–Ω—ã –æ—à–∏–±–æ–∫) -->
  <link rel="stylesheet" href="../../../modia/modia.css">

  <style>
    .test-form {
      max-width: 500px;
      margin: 20px 0;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }

    .form-status {
      margin-top: 15px;
      padding: 10px;
      border-radius: 3px;
      font-weight: 500;
    }

    .form-status.success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .form-status.error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .form-status.pending {
      background: #fff3cd;
      color: #856404;
      border: 1px solid #ffeeba;
    }

    .console-log-container {
      position: relative;
    }

    .btn-copy-log {
      position: absolute;
      top: 5px;
      right: 5px;
      padding: 2px 8px;
      font-size: 11px;
      z-index: 10;
    }

    .edge-case-box {
      background: #fff3cd;
      border: 1px solid #ffeeba;
      padding: 15px;
      margin: 10px 0;
      border-radius: 5px;
    }

    .edge-case-box h5 {
      margin-top: 0;
      color: #856404;
    }
  </style>
</head>

<body>
  <div class="container mt-5">
    <h1>üß™ –¢–µ—Å—Ç ValidationComponent</h1>
    <p class="text-muted">–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ ‚Äî —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –∫—Ä–∞–π–Ω–∏–º —Å–ª—É—á–∞—è–º</p>

    <!-- ============================================================ -->
    <!-- –°–ï–ö–¶–ò–Ø 1: –ü—É—Å—Ç–∞—è —Ñ–æ—Ä–º–∞ (–Ω–µ—Ç –ø–æ–ª–µ–π) -->
    <!-- ============================================================ -->
    <div class="test-section">
      <h3>üìç –°–µ–∫—Ü–∏—è 1: –ü—É—Å—Ç–∞—è —Ñ–æ—Ä–º–∞ (–Ω–µ—Ç –ø–æ–ª–µ–π –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏)</h3>

      <div class="expected-result">
        <h4>‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</h4>
        <ul>
          <li>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫</li>
          <li>–í–∞–ª–∏–¥–∞—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç <code>true</code> (–Ω–µ—Ç –ø–æ–ª–µ–π = –Ω–µ—Ç –æ—à–∏–±–æ–∫)</li>
          <li>–§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –±–µ–∑ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π</li>
          <li>–ù–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ –∫–æ–Ω—Å–æ–ª–∏</li>
        </ul>
      </div>

      <div class="instruction-box">
        <strong>üìã –†—É—á–Ω–æ–π —Ç–µ—Å—Ç:</strong><br>
        1. –ù–∞–∂–º–∏—Ç–µ <code>üìù –û—Ç–ø—Ä–∞–≤–∏—Ç—å</code> ‚Üí —Ñ–æ—Ä–º–∞ –¥–æ–ª–∂–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è<br>
        2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å ‚Äî –Ω–µ—Ç –æ—à–∏–±–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏<br>
        3. –ù–∞–∂–º–∏—Ç–µ <code>üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é</code> ‚Üí –¥–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å <code>true</code>
      </div>

      <div class="edge-case-box">
        <h5>‚ö†Ô∏è –ö—Ä–∞–π–Ω–∏–π —Å–ª—É—á–∞–π: –§–æ—Ä–º–∞ –±–µ–∑ –ø–æ–ª–µ–π</h5>
        <p>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –¥–∞–∂–µ –µ—Å–ª–∏ –≤ —Ñ–æ—Ä–º–µ –Ω–µ—Ç –ø–æ–ª–µ–π –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏.</p>
      </div>

      <!-- –ü—É—Å—Ç–∞—è —Ñ–æ—Ä–º–∞ -->
      <form id="form-empty" data-component="validation" class="test-form">
        <p class="text-muted">–≠—Ç–∞ —Ñ–æ—Ä–º–∞ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ–π –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏</p>
        <div class="form-group mt-3">
          <button type="submit" class="btn btn-primary btn-sm">üìù –û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
          <button type="button" class="btn btn-info btn-sm" id="btn-check-empty">üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é</button>
        </div>
      </form>

      <div id="form-empty-status" class="form-status pending">–°—Ç–∞—Ç—É—Å: –û–∂–∏–¥–∞–Ω–∏–µ...</div>

      <div class="test-buttons mt-3">
        <button class="btn btn-success" id="btn-auto-test-section-1">
          ‚ñ∂Ô∏è –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 1
        </button>
      </div>

      <div id="test-result-1" class="test-result pending">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
    </div>

    <!-- ============================================================ -->
    <!-- –°–ï–ö–¶–ò–Ø 2: –û—Ç–∫–ª—é—á—ë–Ω–Ω—ã–µ –ø–æ–ª—è (disabled) ‚Üí –í–∫–ª—é—á–µ–Ω–∏–µ ‚Üí –í–∞–ª–∏–¥–∞—Ü–∏—è -->
    <!-- ============================================================ -->
    <div class="test-section">
      <h3>üìç –°–µ–∫—Ü–∏—è 2: –û—Ç–∫–ª—é—á—ë–Ω–Ω—ã–µ –ø–æ–ª—è (disabled) ‚Üí –í–∫–ª—é—á–µ–Ω–∏–µ ‚Üí –í–∞–ª–∏–¥–∞—Ü–∏—è</h3>

      <div class="expected-result">
        <h4>‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</h4>
        <ul>
          <li>Disabled –ø–æ–ª–µ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç <code>true</code>)</li>
          <li>–ü–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è (enable) –ø–æ–ª–µ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ</li>
          <li>–ü—É—Å—Ç–æ–µ –≤–∫–ª—é—á—ë–Ω–Ω–æ–µ –ø–æ–ª–µ ‚Üí –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏</li>
          <li>–ó–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ –≤–∫–ª—é—á—ë–Ω–Ω–æ–µ –ø–æ–ª–µ ‚Üí —É—Å–ø–µ—Ö</li>
        </ul>
      </div>

      <div class="instruction-box">
        <strong>üìã –†—É—á–Ω–æ–π —Ç–µ—Å—Ç:</strong><br>
        1. –ù–∞–∂–º–∏—Ç–µ <code>üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å (disabled)</code> ‚Üí —É—Å–ø–µ—Ö (–ø–æ–ª–µ –ø—Ä–æ–ø—É—â–µ–Ω–æ)<br>
        2. –ù–∞–∂–º–∏—Ç–µ <code>üîÑ –í–∫–ª—é—á–∏—Ç—å –ø–æ–ª–µ</code> ‚Üí –ø–æ–ª–µ —Å—Ç–∞–Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–º<br>
        3. –ù–∞–∂–º–∏—Ç–µ <code>üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å (enabled)</code> ‚Üí –æ—à–∏–±–∫–∞ (–ø—É—Å—Ç–æ–µ –ø–æ–ª–µ)<br>
        4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ ‚Üí –Ω–∞–∂–º–∏—Ç–µ <code>üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å (enabled)</code> ‚Üí —É—Å–ø–µ—Ö
      </div>

      <div class="edge-case-box">
        <h5>‚ö†Ô∏è –ö—Ä–∞–π–Ω–∏–π —Å–ª—É—á–∞–π: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è disabled</h5>
        <p>–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–∑–≤–∞—Ç—å <code>refreshRules()</code> –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—ç—à–∞ –ø—Ä–∞–≤–∏–ª.</p>
      </div>

      <form id="form-disabled" data-component="validation" class="test-form">
        <div class="form-group">
          <label for="disabled-field">–û—Ç–∫–ª—é—á—ë–Ω–Ω–æ–µ –ø–æ–ª–µ *</label>
          <input type="text" id="disabled-field" name="disabled_field" class="form-control" required disabled>
          <small class="text-muted">–≠—Ç–æ –ø–æ–ª–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ (disabled)</small>
        </div>

        <div class="error-templates">
          <span class="text-danger" data-rule="required">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ</span>
        </div>

        <div class="form-group mt-3">
          <button type="button" class="btn btn-primary btn-sm" id="btn-validate-disabled">üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å
            (disabled)</button>
          <button type="button" class="btn btn-secondary btn-sm" id="btn-enable-field">üîÑ –í–∫–ª—é—á–∏—Ç—å –ø–æ–ª–µ</button>
          <button type="button" class="btn btn-primary btn-sm" id="btn-validate-enabled">üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å (enabled)</button>
          <button type="button" class="btn btn-info btn-sm" id="btn-fill-disabled">‚úèÔ∏è –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª–µ</button>
        </div>
      </form>

      <div id="form-disabled-status" class="form-status pending">–°—Ç–∞—Ç—É—Å: –û–∂–∏–¥–∞–Ω–∏–µ...</div>

      <div class="test-buttons mt-3">
        <button class="btn btn-success" id="btn-auto-test-section-2">
          ‚ñ∂Ô∏è –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 2
        </button>
      </div>

      <div id="test-result-2" class="test-result pending">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
    </div>

    <!-- ============================================================ -->
    <!-- –°–ï–ö–¶–ò–Ø 3: –°–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—è (hidden) ‚Üí –ü–æ–∫–∞–∑ ‚Üí –í–∞–ª–∏–¥–∞—Ü–∏—è -->
    <!-- ============================================================ -->
    <div class="test-section">
      <h3>üìç –°–µ–∫—Ü–∏—è 3: –°–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—è (hidden) ‚Üí –ü–æ–∫–∞–∑ ‚Üí –í–∞–ª–∏–¥–∞—Ü–∏—è</h3>

      <div class="expected-result">
        <h4>‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</h4>
        <ul>
          <li>–°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç <code>true</code>)</li>
          <li>–ü–æ—Å–ª–µ –ø–æ–∫–∞–∑–∞ –ø–æ–ª–µ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ</li>
          <li>–ü—É—Å—Ç–æ–µ –ø–æ–∫–∞–∑–∞–Ω–Ω–æ–µ –ø–æ–ª–µ ‚Üí –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏</li>
          <li>–ó–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ –ø–æ–∫–∞–∑–∞–Ω–Ω–æ–µ –ø–æ–ª–µ ‚Üí —É—Å–ø–µ—Ö</li>
        </ul>
      </div>

      <div class="instruction-box">
        <strong>üìã –†—É—á–Ω–æ–π —Ç–µ—Å—Ç:</strong><br>
        1. –ù–∞–∂–º–∏—Ç–µ <code>üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å (hidden)</code> ‚Üí —É—Å–ø–µ—Ö (–ø–æ–ª–µ —Å–∫—Ä—ã—Ç–æ)<br>
        2. –ù–∞–∂–º–∏—Ç–µ <code>üëÅÔ∏è –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–µ</code> ‚Üí –ø–æ–ª–µ —Å—Ç–∞–Ω–µ—Ç –≤–∏–¥–∏–º—ã–º<br>
        3. –ù–∞–∂–º–∏—Ç–µ <code>üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å (shown)</code> ‚Üí –æ—à–∏–±–∫–∞ (–ø—É—Å—Ç–æ–µ –ø–æ–ª–µ)<br>
        4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ ‚Üí –Ω–∞–∂–º–∏—Ç–µ <code>üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å (shown)</code> ‚Üí —É—Å–ø–µ—Ö
      </div>

      <div class="edge-case-box">
        <h5>‚ö†Ô∏è –ö—Ä–∞–π–Ω–∏–π —Å–ª—É—á–∞–π: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø–æ–ª—è</h5>
        <p>–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø–æ–ª—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–∑–≤–∞—Ç—å <code>refreshRules()</code> –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—ç—à–∞ –ø—Ä–∞–≤–∏–ª.</p>
      </div>

      <form id="form-hidden" data-component="validation" class="test-form">
        <div class="form-group">
          <label for="hidden-field">–°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ *</label>
          <input type="text" id="hidden-field" name="hidden_field" class="form-control d-none" required>
          <small class="text-muted">–≠—Ç–æ –ø–æ–ª–µ —Å–∫—Ä—ã—Ç–æ (class="d-none")</small>
        </div>

        <div class="error-templates">
          <span class="text-danger" data-rule="required">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ</span>
        </div>

        <div class="form-group mt-3">
          <button type="button" class="btn btn-primary btn-sm" id="btn-validate-hidden">üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å (hidden)</button>
          <button type="button" class="btn btn-secondary btn-sm" id="btn-show-field">üëÅÔ∏è –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–µ</button>
          <button type="button" class="btn btn-primary btn-sm" id="btn-validate-shown">üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å (shown)</button>
          <button type="button" class="btn btn-info btn-sm" id="btn-fill-hidden">‚úèÔ∏è –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª–µ</button>
        </div>
      </form>

      <div id="form-hidden-status" class="form-status pending">–°—Ç–∞—Ç—É—Å: –û–∂–∏–¥–∞–Ω–∏–µ...</div>

      <div class="test-buttons mt-3">
        <button class="btn btn-success" id="btn-auto-test-section-3">
          ‚ñ∂Ô∏è –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 3
        </button>
      </div>

      <div id="test-result-3" class="test-result pending">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
    </div>

    <!-- ============================================================ -->
    <!-- –°–ï–ö–¶–ò–Ø 4: –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (destroy) -->
    <!-- ============================================================ -->
    <div class="test-section">
      <h3>üìç –°–µ–∫—Ü–∏—è 4: –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (destroy)</h3>

      <div class="expected-result">
        <h4>‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</h4>
        <ul>
          <li><code>destroy()</code> –æ—á–∏—â–∞–µ—Ç –æ—à–∏–±–∫–∏ –ø–µ—Ä–µ–¥ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ–º</li>
          <li><code>destroy()</code> —É–¥–∞–ª—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π</li>
          <li><code>destroy()</code> —É–¥–∞–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞</li>
          <li>–ü–æ—Å–ª–µ destroy –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —Å–æ–±—ã—Ç–∏—è</li>
          <li>–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤ destroy –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–æ–∫</li>
        </ul>
      </div>

      <div class="instruction-box">
        <strong>üìã –†—É—á–Ω–æ–π —Ç–µ—Å—Ç:</strong><br>
        1. –ù–∞–∂–º–∏—Ç–µ <code>üìù –°–æ–∑–¥–∞—Ç—å –æ—à–∏–±–∫—É</code> ‚Üí –æ—à–∏–±–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è<br>
        2. –ù–∞–∂–º–∏—Ç–µ <code>üóëÔ∏è –£–Ω–∏—á—Ç–æ–∂–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç</code> ‚Üí –æ—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∏—Ç—Å—è, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —É–¥–∞–ª–∏—Ç—Å—è<br>
        3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å ‚Üí –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç<br>
        4. –ù–∞–∂–º–∏—Ç–µ <code>üóëÔ∏è –£–Ω–∏—á—Ç–æ–∂–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç</code> –ø–æ–≤—Ç–æ—Ä–Ω–æ ‚Üí –Ω–µ—Ç –æ—à–∏–±–æ–∫
      </div>

      <div class="edge-case-box">
        <h5>‚ö†Ô∏è –ö—Ä–∞–π–Ω–∏–π —Å–ª—É—á–∞–π: –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ</h5>
        <p>–ú–µ—Ç–æ–¥ <code>destroy()</code> –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–æ–∫.</p>
      </div>

      <form id="form-destroy" data-component="validation" class="test-form">
        <div class="form-group">
          <label for="destroy-field">–ü–æ–ª–µ *</label>
          <input type="text" id="destroy-field" name="destroy_field" class="form-control" required>
        </div>

        <div class="error-templates">
          <span class="text-danger" data-rule="required">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ</span>
        </div>

        <div class="form-group mt-3">
          <button type="button" class="btn btn-danger btn-sm" id="btn-create-error">üìù –°–æ–∑–¥–∞—Ç—å –æ—à–∏–±–∫—É</button>
          <button type="button" class="btn btn-danger btn-sm" id="btn-destroy-component">üóëÔ∏è –£–Ω–∏—á—Ç–æ–∂–∏—Ç—å
            –∫–æ–º–ø–æ–Ω–µ–Ω—Ç</button>
          <button type="button" class="btn btn-info btn-sm" id="btn-check-destroy-status">üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å</button>
        </div>
      </form>

      <div id="form-destroy-status" class="form-status pending">–°—Ç–∞—Ç—É—Å: –û–∂–∏–¥–∞–Ω–∏–µ...</div>
      <div id="destroy-status-output" class="registry-display">–°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞: (–æ–∂–∏–¥–∞–Ω–∏–µ)</div>

      <div class="test-buttons mt-3">
        <button class="btn btn-success" id="btn-auto-test-section-4">
          ‚ñ∂Ô∏è –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 4
        </button>
      </div>

      <div id="test-result-4" class="test-result pending">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
    </div>

    <!-- ============================================================ -->
    <!-- –°–ï–ö–¶–ò–Ø 5: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—à–∏–±–æ–∫ -->
    <!-- ============================================================ -->
    <div class="test-section">
      <h3>üìç –°–µ–∫—Ü–∏—è 5: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—à–∏–±–æ–∫</h3>

      <div class="expected-result">
        <h4>‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</h4>
        <ul>
          <li>–ü–æ—Å–ª–µ –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ</li>
          <li><code>clearErrors()</code> –æ—á–∏—â–∞–µ—Ç –≤—Å–µ –æ—à–∏–±–∫–∏</li>
          <li>–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏</li>
          <li>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ ¬´–ª–æ–º–∞–µ—Ç—Å—è¬ª –ø–æ—Å–ª–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫</li>
        </ul>
      </div>

      <div class="instruction-box">
        <strong>üìã –†—É—á–Ω–æ–π —Ç–µ—Å—Ç:</strong><br>
        1. –ù–∞–∂–º–∏—Ç–µ <code>üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å</code> —Å –ø—É—Å—Ç—ã–º–∏ –ø–æ–ª—è–º–∏ ‚Üí –æ—à–∏–±–∫–∏<br>
        2. –ù–∞–∂–º–∏—Ç–µ <code>üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –æ—à–∏–±–∫–∏</code> ‚Üí –æ—à–∏–±–∫–∏ –∏—Å—á–µ–∑–Ω—É—Ç<br>
        3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è ‚Üí –Ω–∞–∂–º–∏—Ç–µ <code>üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å</code> ‚Üí —É—Å–ø–µ—Ö
      </div>

      <div class="edge-case-box">
        <h5>‚ö†Ô∏è –ö—Ä–∞–π–Ω–∏–π —Å–ª—É—á–∞–π: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏</h5>
        <p>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –ø–æ—Å–ª–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏.</p>
      </div>

      <form id="form-recovery" data-component="validation" class="test-form">
        <div class="form-group">
          <label for="recovery-name">–ò–º—è *</label>
          <input type="text" id="recovery-name" name="name" class="form-control" required>
        </div>

        <div class="form-group">
          <label for="recovery-email">Email *</label>
          <input type="email" id="recovery-email" name="email" class="form-control" required>
        </div>

        <div class="error-templates">
          <span class="text-danger" data-rule="required">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ</span>
          <span class="text-danger" data-rule="email">–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email</span>
        </div>

        <div class="form-group mt-3">
          <button type="button" class="btn btn-primary btn-sm" id="btn-validate-recovery">üìù –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å</button>
          <button type="button" class="btn btn-outline-danger btn-sm" id="btn-clear-recovery">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å
            –æ—à–∏–±–∫–∏</button>
          <button type="button" class="btn btn-outline-info btn-sm" id="btn-fill-recovery">‚úèÔ∏è –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª—è</button>
          <button type="button" class="btn btn-outline-secondary btn-sm" id="btn-reset-recovery">üîÑ –û—á–∏—Å—Ç–∏—Ç—å
            –ø–æ–ª—è</button>
        </div>
      </form>

      <div id="form-recovery-status" class="form-status pending">–°—Ç–∞—Ç—É—Å: –û–∂–∏–¥–∞–Ω–∏–µ...</div>

      <div class="test-buttons mt-3">
        <button class="btn btn-success" id="btn-auto-test-section-5">
          ‚ñ∂Ô∏è –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 5
        </button>
      </div>

      <div id="test-result-5" class="test-result pending">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
    </div>

    <!-- ============================================================ -->
    <!-- –ö–û–ù–°–û–õ–¨ –õ–û–ì–ì–ï–†–ê -->
    <!-- ============================================================ -->
    <div class="test-section">
      <h3>üìã –ö–æ–Ω—Å–æ–ª—å –ª–æ–≥–≥–µ—Ä–∞</h3>

      <div class="console-log-container">
        <button class="btn btn-sm btn-outline-secondary btn-copy-log" id="btn-copy-log">
          üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
        </button>
        <div class="event-log" id="console-log" style="max-height: 300px; overflow-y: auto;">
          <div class="text-muted"><small>[00:00:00] –ö–æ–Ω—Å–æ–ª—å –ª–æ–≥–≥–µ—Ä–∞ –≥–æ—Ç–æ–≤–∞...</small></div>
        </div>
      </div>

      <div class="test-buttons mt-2">
        <button class="btn btn-outline-secondary" id="btn-clear-log">üßπ –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥</button>
      </div>
    </div>

    <!-- ============================================================ -->
    <!-- –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ö–ù–û–ü–ö–ò -->
    <!-- ============================================================ -->
    <div class="test-buttons mt-4">
      <button class="btn btn-success btn-lg" id="btn-auto-test-all">
        ‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ-—Ç–µ—Å—Ç –≤—Å–µ—Ö —Å–µ–∫—Ü–∏–π
      </button>
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="mt-4">
      <a href="test-04-multiple-forms.html" class="btn btn-outline-secondary">
        ‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–µ—Å—Ç: –ù–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ—Ä–º
      </a>
      <a href="test-06-dynamic-fields.html" class="btn btn-outline-primary">
        ‚Üí –°–ª–µ–¥—É—é—â–∏–π —Ç–µ—Å—Ç: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è
      </a>
    </div>
  </div>

  <!-- ‚úÖ Modia Index (3 —É—Ä–æ–≤–Ω—è –≤–≤–µ—Ä—Ö!) -->
  <script type="module" src="../../../modia/index.js"></script>

  <!-- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç -->
  <script type="module">
    // ============================================================
    // –£–¢–ò–õ–ò–¢–´
    // ============================================================

    let testRunning = false;

    function log(message, type = 'info') {
      const $log = $('#console-log');
      const timestamp = new Date().toLocaleTimeString('ru-RU');
      const color = type === 'error' ? 'text-danger'
        : type === 'success' ? 'text-success'
          : 'text-muted';
      $log.append(`<div class="${color}"><small>[${timestamp}] ${message}</small></div>`);
      $log.scrollTop($log[0].scrollHeight);
      console.log(`[Error Handling Test] ${message}`);
    }

    function sleep(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    function setFormStatus(formId, status, message) {
      const $status = $(`#${formId}-status`);
      $status.removeClass('success error pending').addClass(status);
      $status.text(`–°—Ç–∞—Ç—É—Å: ${message}`);
    }

    // ============================================================
    // –ö–û–ü–ò–†–û–í–ê–ù–ò–ï –õ–û–ì–ê –í –ë–£–§–ï–† –û–ë–ú–ï–ù–ê (—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø–µ—Ä–µ–Ω–æ—Å–æ–≤)
    // ============================================================

    function copyLogToClipboard() {
      const $log = $('#console-log');

      // ‚úÖ –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫
      const lines = [];
      $log.find('div').each(function () {
        lines.push($(this).text().trim());
      });
      const text = lines.join('\n');

      if (!text) {
        log('‚ùå –ù–µ—á–µ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ‚Äî –ª–æ–≥ –ø—É—Å—Ç', 'error');
        return false;
      }

      if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(text).then(() => {
          log('‚úÖ –õ–æ–≥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞', 'success');
          const $btn = $('#btn-copy-log');
          const originalText = $btn.text();
          $btn.text('‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!').prop('disabled', true);
          setTimeout(() => {
            $btn.text(originalText).prop('disabled', false);
          }, 2000);
        }).catch(err => {
          log(`‚ùå –û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: ${err.message}`, 'error');
        });
      } else {
        const $textarea = $('<textarea>').val(text).css({
          position: 'absolute',
          left: '-9999px',
          top: '-9999px'
        }).appendTo('body');

        $textarea[0].select();
        try {
          document.execCommand('copy');
          log('‚úÖ –õ–æ–≥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞ (fallback)', 'success');
        } catch (err) {
          log(`‚ùå –û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è (fallback): ${err.message}`, 'error');
        }
        $textarea.remove();
      }

      return true;
    }

    // ============================================================
    // –°–ï–ö–¶–ò–Ø 1: –ü—É—Å—Ç–∞—è —Ñ–æ—Ä–º–∞
    // ============================================================

    $(document).ready(function () {
      log('DOM –≥–æ—Ç–æ–≤, –æ–∂–∏–¥–∞–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Modia...', 'info');

      setTimeout(function () {
        log('Modia –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω', 'success');

        const $formEmpty = $('#form-empty');
        const compEmpty = $formEmpty.data('modia-component');

        if (compEmpty) {
          log(`‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—É—Å—Ç–æ–π —Ñ–æ—Ä–º—ã –Ω–∞–π–¥–µ–Ω`, 'success');
          log(`   –í–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤: ${compEmpty.fieldValidators?.length || 0}`, 'info');
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—É—Å—Ç–æ–π —Ñ–æ—Ä–º—ã
        $('#btn-check-empty').on('click', function () {
          if (compEmpty) {
            const isValid = compEmpty.validate();
            log(`üîç –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç–æ–π —Ñ–æ—Ä–º—ã: ${isValid}`, isValid ? 'success' : 'error');
            setFormStatus('form-empty', isValid ? 'success' : 'error',
              isValid ? '–í–∞–ª–∏–¥–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞ (–Ω–µ—Ç –ø–æ–ª–µ–π)' : '–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏');
          }
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏
        $formEmpty.on('submit', function (e) {
          e.preventDefault();
          log('üìù –ü—É—Å—Ç–∞—è —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ (demo)', 'success');
          setFormStatus('form-empty', 'success', '–§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!');
        });
      }, 500);
    });

    // ============================================================
    // –°–ï–ö–¶–ò–Ø 2: –û—Ç–∫–ª—é—á—ë–Ω–Ω—ã–µ –ø–æ–ª—è
    // ============================================================

    $(document).ready(function () {
    setTimeout(function () {
      const $formDisabled = $('#form-disabled');
      const compDisabled = $formDisabled.data('modia-component');

      let isDisabled = true;

      // –í–∞–ª–∏–¥–∞—Ü–∏—è (disabled)
      $('#btn-validate-disabled').on('click', function () {
        if (compDisabled) {
          const isValid = compDisabled.validate();
          log(`üìù –í–∞–ª–∏–¥–∞—Ü–∏—è disabled-–ø–æ–ª—è: ${isValid}`, isValid ? 'success' : 'error');
          setFormStatus('form-disabled', isValid ? 'success' : 'error',
            isValid ? '–ü–æ–ª–µ –ø—Ä–æ–ø—É—â–µ–Ω–æ (disabled)' : '–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏');
        }
      });

      // –í–∫–ª—é—á–∏—Ç—å –ø–æ–ª–µ
      $('#btn-enable-field').on('click', function () {
        const $field = $('#disabled-field');
        $field.prop('disabled', false);
        isDisabled = false;

        // ‚úÖ –í–ê–ñ–ù–û: –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∞–≤–∏–ª–∞ –∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ–º –∑–∞–Ω–æ–≤–æ
        if (compDisabled) {
          compDisabled.refreshRules();
          log('üîÑ –ü–æ–ª–µ –≤–∫–ª—é—á–µ–Ω–æ, refreshRules() –≤—ã–∑–≤–∞–Ω', 'info');
        }
        setFormStatus('form-disabled', 'pending', '–ü–æ–ª–µ –≤–∫–ª—é—á–µ–Ω–æ');
      });

      // –í–∞–ª–∏–¥–∞—Ü–∏—è (enabled)
      $('#btn-validate-enabled').on('click', function () {
        if (compDisabled) {
          const isValid = compDisabled.validate();
          log(`üìù –í–∞–ª–∏–¥–∞—Ü–∏—è enabled-–ø–æ–ª—è: ${isValid}`, isValid ? 'success' : 'error');
          setFormStatus('form-disabled', isValid ? 'success' : 'error',
            isValid ? '–í–∞–ª–∏–¥–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞' : '–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏');
        }
      });

      // –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª–µ
      $('#btn-fill-disabled').on('click', function () {
        $('#disabled-field').val('–¢–µ—Å—Ç–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ');
        log('‚úèÔ∏è –ü–æ–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ', 'info');
        setFormStatus('form-disabled', 'pending', '–ü–æ–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ');
      });
    }, 500);
  });

    // ============================================================
    // –°–ï–ö–¶–ò–Ø 3: –°–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—è
    // ============================================================

    $(document).ready(function () {
    setTimeout(function () {
      const $formHidden = $('#form-hidden');
      const compHidden = $formHidden.data('modia-component');

      let isHidden = true;

      // –í–∞–ª–∏–¥–∞—Ü–∏—è (hidden)
      $('#btn-validate-hidden').on('click', function () {
        if (compHidden) {
          const isValid = compHidden.validate();
          log(`üìù –í–∞–ª–∏–¥–∞—Ü–∏—è hidden-–ø–æ–ª—è: ${isValid}`, isValid ? 'success' : 'error');
          setFormStatus('form-hidden', isValid ? 'success' : 'error',
            isValid ? '–ü–æ–ª–µ –ø—Ä–æ–ø—É—â–µ–Ω–æ (hidden)' : '–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏');
        }
      });

      // –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–µ
      $('#btn-show-field').on('click', function () {
        const $field = $('#hidden-field');
        $field.removeClass('d-none');
        isHidden = false;

        // ‚úÖ –í–ê–ñ–ù–û: –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∞–≤–∏–ª–∞ –∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ–º –∑–∞–Ω–æ–≤–æ
        if (compHidden) {
          compHidden.refreshRules();
          log('üëÅÔ∏è –ü–æ–ª–µ –ø–æ–∫–∞–∑–∞–Ω–æ, refreshRules() –≤—ã–∑–≤–∞–Ω', 'info');
        }
        setFormStatus('form-hidden', 'pending', '–ü–æ–ª–µ –ø–æ–∫–∞–∑–∞–Ω–æ');
      });

      // –í–∞–ª–∏–¥–∞—Ü–∏—è (shown)
      $('#btn-validate-shown').on('click', function () {
        if (compHidden) {
          const isValid = compHidden.validate();
          log(`üìù –í–∞–ª–∏–¥–∞—Ü–∏—è shown-–ø–æ–ª—è: ${isValid}`, isValid ? 'success' : 'error');
          setFormStatus('form-hidden', isValid ? 'success' : 'error',
            isValid ? '–í–∞–ª–∏–¥–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞' : '–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏');
        }
      });

      // –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª–µ
      $('#btn-fill-hidden').on('click', function () {
        $('#hidden-field').val('–¢–µ—Å—Ç–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ');
        log('‚úèÔ∏è –ü–æ–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ', 'info');
        setFormStatus('form-hidden', 'pending', '–ü–æ–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ');
      });
    }, 500);
  });

  // ============================================================
    // –°–ï–ö–¶–ò–Ø 4: –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
    // ============================================================

    $(document).ready(function () {
      setTimeout(function () {
        const $formDestroy = $('#form-destroy');
        let compDestroy = $formDestroy.data('modia-component');

        // –°–æ–∑–¥–∞—Ç—å –æ—à–∏–±–∫—É
        $('#btn-create-error').on('click', function () {
          if (compDestroy) {
            // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ–º ‚Üí –æ—à–∏–±–∫–∞
            $('#destroy-field').val('');
            const isValid = compDestroy.validate();
            log(`üìù –°–æ–∑–¥–∞—Ç—å –æ—à–∏–±–∫—É: isValid=${isValid}`, isValid ? 'warn' : 'success');
            setFormStatus('form-destroy', isValid ? 'success' : 'error',
              isValid ? '–í–∞–ª–∏–¥–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞' : '–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∞');
          } else {
            log('‚ùå –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —É–Ω–∏—á—Ç–æ–∂–µ–Ω', 'error');
            setFormStatus('form-destroy', 'error', '–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —É–Ω–∏—á—Ç–æ–∂–µ–Ω');
          }
        });

        // –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ
        $('#btn-destroy-component').on('click', function () {
          if (compDestroy) {
            // ‚úÖ –í–ê–ñ–ù–û: –°–Ω–∞—á–∞–ª–∞ –≤–∞–ª–∏–¥–∏—Ä—É–µ–º (—á—Ç–æ–±—ã –±—ã–ª–∏ –æ—à–∏–±–∫–∏), –ø–æ—Ç–æ–º —É–Ω–∏—á—Ç–æ–∂–∞–µ–º
            compDestroy.validate();

            // ‚úÖ destroy() –¥–æ–ª–∂–µ–Ω –æ—á–∏—Å—Ç–∏—Ç—å –æ—à–∏–±–∫–∏ –≤–Ω—É—Ç—Ä–∏ —Å–µ–±—è
            compDestroy.destroy();
            compDestroy = null;

            log('üóëÔ∏è –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —É–Ω–∏—á—Ç–æ–∂–µ–Ω', 'warn');
            setFormStatus('form-destroy', 'error', '–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —É–Ω–∏—á—Ç–æ–∂–µ–Ω');
            $('#destroy-status-output').text('–°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞: —É–Ω–∏—á—Ç–æ–∂–µ–Ω');
          } else {
            log('‚ö†Ô∏è –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —É–∂–µ —É–Ω–∏—á—Ç–æ–∂–µ–Ω', 'warn');
            setFormStatus('form-destroy', 'error', '–£–∂–µ —É–Ω–∏—á—Ç–æ–∂–µ–Ω');
          }
        });

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
        $('#btn-check-destroy-status').on('click', function () {
          const status = compDestroy ? '–∞–∫—Ç–∏–≤–µ–Ω' : '—É–Ω–∏—á—Ç–æ–∂–µ–Ω';
          const hasData = $formDestroy.data('modia-component') ? '–¥–∞' : '–Ω–µ—Ç';
          $('#destroy-status-output').text(
            `–°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞: ${status}\n–î–∞–Ω–Ω—ã–µ –≤ DOM: ${hasData}`
          );
          log(`üîç –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞: ${status}, –î–∞–Ω–Ω—ã–µ: ${hasData}`, 'info');
        });
      }, 500);
    });

    // ============================================================
    // –°–ï–ö–¶–ò–Ø 5: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—à–∏–±–æ–∫
    // ============================================================

    $(document).ready(function () {
      setTimeout(function () {
        const $formRecovery = $('#form-recovery');
        const compRecovery = $formRecovery.data('modia-component');

        // –í–∞–ª–∏–¥–∞—Ü–∏—è
        $('#btn-validate-recovery').on('click', function () {
          if (compRecovery) {
            const isValid = compRecovery.validate();
            log(`üìù –í–∞–ª–∏–¥–∞—Ü–∏—è: ${isValid}`, isValid ? 'success' : 'error');
            setFormStatus('form-recovery', isValid ? 'success' : 'error',
              isValid ? '–í–∞–ª–∏–¥–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞' : `–û—à–∏–±–æ–∫: ${compRecovery.getErrors().length}`);
          }
        });

        // –û—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–æ–∫
        $('#btn-clear-recovery').on('click', function () {
          if (compRecovery) {
            compRecovery.clearErrors();
            log('üóëÔ∏è –û—à–∏–±–∫–∏ –æ—á–∏—â–µ–Ω—ã', 'info');
            setFormStatus('form-recovery', 'pending', '–û—à–∏–±–∫–∏ –æ—á–∏—â–µ–Ω—ã');
          }
        });

        // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π
        $('#btn-fill-recovery').on('click', function () {
          $('#recovery-name').val('–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤');
          $('#recovery-email').val('ivan@example.com');
          log('‚úèÔ∏è –ü–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã', 'info');
          setFormStatus('form-recovery', 'pending', '–ü–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã');
        });

        // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
        $('#btn-reset-recovery').on('click', function () {
          $('#form-recovery')[0].reset();
          if (compRecovery) {
            compRecovery.clearErrors();
          }
          log('üîÑ –ü–æ–ª—è –æ—á–∏—â–µ–Ω—ã', 'info');
          setFormStatus('form-recovery', 'pending', '–ü–æ–ª—è –æ—á–∏—â–µ–Ω—ã');
        });
      }, 500);
    });

    // ============================================================
    // –ê–í–¢–û-–¢–ï–°–¢ –°–ï–ö–¶–ò–ò 1
    // ============================================================

    $('#btn-auto-test-section-1').on('click', async function () {
      if (testRunning) return;
      testRunning = true;

      const $btn = $(this);
      $btn.prop('disabled', true).text('‚è≥ –¢–µ—Å—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...');

      try {
        log('=== –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 1: –ù–∞—á–∞–ª–æ ===', 'info');

        const compEmpty = $('#form-empty').data('modia-component');

        // –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        log('–®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏...', 'info');
        if (!compEmpty) {
          throw new Error('–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
        }

        // –®–∞–≥ 2: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç–æ–π —Ñ–æ—Ä–º—ã
        log('–®–∞–≥ 2: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç–æ–π —Ñ–æ—Ä–º—ã...', 'info');
        const isValid = compEmpty.validate();
        if (isValid) {
          log('‚úÖ –®–∞–≥ 2: –ü—É—Å—Ç–∞—è —Ñ–æ—Ä–º–∞ –≤–∞–ª–∏–¥–Ω–∞ (–Ω–µ—Ç –ø–æ–ª–µ–π)', 'success');
        } else {
          throw new Error('–ü—É—Å—Ç–∞—è —Ñ–æ—Ä–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω–∞');
        }

        log('=== –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 1: –£—Å–ø–µ—à–Ω–æ ===', 'success');
        $('#test-result-1').removeClass('pending').addClass('pass')
          .text('‚úÖ –ê–≤—Ç–æ-—Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω');

      } catch (error) {
        log(`‚ùå –ê–≤—Ç–æ-—Ç–µ—Å—Ç –ø—Ä–æ–≤–∞–ª–µ–Ω: ${error.message}`, 'error');
        $('#test-result-1').removeClass('pending').addClass('fail')
          .text(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`);
      } finally {
        $btn.prop('disabled', false).text('‚ñ∂Ô∏è –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 1');
        testRunning = false;
      }
    });

    // ============================================================
    // –ê–í–¢–û-–¢–ï–°–¢ –°–ï–ö–¶–ò–ò 2
    // ============================================================

    $('#btn-auto-test-section-2').on('click', async function () {
    if (testRunning) return;
    testRunning = true;

    const $btn = $(this);
    $btn.prop('disabled', true).text('‚è≥ –¢–µ—Å—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...');

    try {
      log('=== –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 2: –ù–∞—á–∞–ª–æ ===', 'info');

      const compDisabled = $('#form-disabled').data('modia-component');

      // –®–∞–≥ 1: Disabled –ø–æ–ª–µ ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è
      log('–®–∞–≥ 1: –í–∞–ª–∏–¥–∞—Ü–∏—è disabled –ø–æ–ª—è...', 'info');
      $('#disabled-field').prop('disabled', true).val('');
      if (compDisabled) compDisabled.refreshRules();
      await sleep(300);

      const isValid1 = compDisabled.validate();
      if (isValid1) {
        log('‚úÖ –®–∞–≥ 1: Disabled –ø–æ–ª–µ –ø—Ä–æ–ø—É—â–µ–Ω–æ', 'success');
      } else {
        throw new Error('Disabled –ø–æ–ª–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–æ–ø—É—â–µ–Ω–æ');
      }

      await sleep(500);

      // –®–∞–≥ 2: –í–∫–ª—é—á–∏—Ç—å –ø–æ–ª–µ ‚Üí –æ—à–∏–±–∫–∞ (–ø—É—Å—Ç–æ–µ)
      log('–®–∞–≥ 2: –í–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª—è...', 'info');
      $('#disabled-field').prop('disabled', false);
      if (compDisabled) compDisabled.refreshRules();
      await sleep(300);

      const isValid2 = compDisabled.validate();
      if (!isValid2) {
        log('‚úÖ –®–∞–≥ 2: –í–∫–ª—é—á—ë–Ω–Ω–æ–µ –ø—É—Å—Ç–æ–µ –ø–æ–ª–µ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ', 'success');
      } else {
        throw new Error('–í–∫–ª—é—á—ë–Ω–Ω–æ–µ –ø—É—Å—Ç–æ–µ –ø–æ–ª–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ–≤–∞–ª–∏–¥–Ω–æ');
      }

      await sleep(500);

      // –®–∞–≥ 3: –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª–µ ‚Üí —É—Å–ø–µ—Ö
      log('–®–∞–≥ 3: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª—è...', 'info');
      $('#disabled-field').val('–¢–µ—Å—Ç–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ');
      await sleep(300);

      const isValid3 = compDisabled.validate();
      if (isValid3) {
        log('‚úÖ –®–∞–≥ 3: –ó–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ –ø–æ–ª–µ –≤–∞–ª–∏–¥–Ω–æ', 'success');
      } else {
        throw new Error('–ó–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ –ø–æ–ª–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω–æ');
      }

      log('=== –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 2: –£—Å–ø–µ—à–Ω–æ ===', 'success');
      $('#test-result-2').removeClass('pending').addClass('pass')
        .text('‚úÖ –ê–≤—Ç–æ-—Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω');

    } catch (error) {
      log(`‚ùå –ê–≤—Ç–æ-—Ç–µ—Å—Ç –ø—Ä–æ–≤–∞–ª–µ–Ω: ${error.message}`, 'error');
      $('#test-result-2').removeClass('pending').addClass('fail')
        .text(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`);
    } finally {
      $btn.prop('disabled', false).text('‚ñ∂Ô∏è –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 2');
      testRunning = false;
    }
  });

    // ============================================================
    // –ê–í–¢–û-–¢–ï–°–¢ –°–ï–ö–¶–ò–ò 3
    // ============================================================

    $('#btn-auto-test-section-3').on('click', async function () {
    if (testRunning) return;
    testRunning = true;

    const $btn = $(this);
    $btn.prop('disabled', true).text('‚è≥ –¢–µ—Å—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...');

    try {
      log('=== –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 3: –ù–∞—á–∞–ª–æ ===', 'info');

      const compHidden = $('#form-hidden').data('modia-component');

      // –®–∞–≥ 1: Hidden –ø–æ–ª–µ ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è
      log('–®–∞–≥ 1: –í–∞–ª–∏–¥–∞—Ü–∏—è hidden –ø–æ–ª—è...', 'info');
      $('#hidden-field').addClass('d-none').val('');
      if (compHidden) compHidden.refreshRules();
      await sleep(300);

      const isValid1 = compHidden.validate();
      if (isValid1) {
        log('‚úÖ –®–∞–≥ 1: Hidden –ø–æ–ª–µ –ø—Ä–æ–ø—É—â–µ–Ω–æ', 'success');
      } else {
        throw new Error('Hidden –ø–æ–ª–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–æ–ø—É—â–µ–Ω–æ');
      }

      await sleep(500);

      // –®–∞–≥ 2: –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–µ ‚Üí –æ—à–∏–±–∫–∞ (–ø—É—Å—Ç–æ–µ)
      log('–®–∞–≥ 2: –ü–æ–∫–∞–∑ –ø–æ–ª—è...', 'info');
      $('#hidden-field').removeClass('d-none');
      if (compHidden) compHidden.refreshRules();
      await sleep(300);

      const isValid2 = compHidden.validate();
      if (!isValid2) {
        log('‚úÖ –®–∞–≥ 2: –ü–æ–∫–∞–∑–∞–Ω–Ω–æ–µ –ø—É—Å—Ç–æ–µ –ø–æ–ª–µ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ', 'success');
      } else {
        throw new Error('–ü–æ–∫–∞–∑–∞–Ω–Ω–æ–µ –ø—É—Å—Ç–æ–µ –ø–æ–ª–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ–≤–∞–ª–∏–¥–Ω–æ');
      }

      await sleep(500);

      // –®–∞–≥ 3: –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª–µ ‚Üí —É—Å–ø–µ—Ö
      log('–®–∞–≥ 3: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª—è...', 'info');
      $('#hidden-field').val('–¢–µ—Å—Ç–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ');
      await sleep(300);

      const isValid3 = compHidden.validate();
      if (isValid3) {
        log('‚úÖ –®–∞–≥ 3: –ó–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ –ø–æ–ª–µ –≤–∞–ª–∏–¥–Ω–æ', 'success');
      } else {
        throw new Error('–ó–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ –ø–æ–ª–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω–æ');
      }

      log('=== –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 3: –£—Å–ø–µ—à–Ω–æ ===', 'success');
      $('#test-result-3').removeClass('pending').addClass('pass')
        .text('‚úÖ –ê–≤—Ç–æ-—Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω');

    } catch (error) {
      log(`‚ùå –ê–≤—Ç–æ-—Ç–µ—Å—Ç –ø—Ä–æ–≤–∞–ª–µ–Ω: ${error.message}`, 'error');
      $('#test-result-3').removeClass('pending').addClass('fail')
        .text(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`);
    } finally {
      $btn.prop('disabled', false).text('‚ñ∂Ô∏è –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 3');
      testRunning = false;
    }
  });
  
    // ============================================================
    // –ê–í–¢–û-–¢–ï–°–¢ –°–ï–ö–¶–ò–ò 4
    // ============================================================

    $('#btn-auto-test-section-4').on('click', async function () {
      if (testRunning) return;
      testRunning = true;

      const $btn = $(this);
      $btn.prop('disabled', true).text('‚è≥ –¢–µ—Å—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...');

      try {
        log('=== –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 4: –ù–∞—á–∞–ª–æ ===', 'info');

        const $formDestroy = $('#form-destroy');
        let compDestroy = $formDestroy.data('modia-component');

        // –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        log('–®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏...', 'info');
        if (!compDestroy) {
          throw new Error('–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
        }
        log('‚úÖ –®–∞–≥ 1: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω', 'success');

        // –®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å –æ—à–∏–±–∫—É (–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç–æ–≥–æ –ø–æ–ª—è)
        log('–®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –æ—à–∏–±–∫–∏...', 'info');
        $('#destroy-field').val('');
        if (compDestroy) compDestroy.refreshRules();
        await sleep(300);

        const isValidBefore = compDestroy.validate();
        const hasErrors = compDestroy.getErrors().length > 0;

        if (!isValidBefore && hasErrors) {
          log('‚úÖ –®–∞–≥ 2: –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∞', 'success');
        } else {
          throw new Error(`–û—à–∏–±–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∞ (isValid=${isValidBefore}, errors=${compDestroy.getErrors().length})`);
        }

        await sleep(500);

        // –®–∞–≥ 3: –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
        log('–®–∞–≥ 3: –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞...', 'info');
        compDestroy.destroy();
        await sleep(300);

        // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã
        const hasDataAfter = $formDestroy.data('modia-component');
        if (!hasDataAfter) {
          log('‚úÖ –®–∞–≥ 3: –î–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —É–¥–∞–ª–µ–Ω—ã', 'success');
        } else {
          throw new Error('–î–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–¥–∞–ª–µ–Ω—ã');
        }

        await sleep(500);

        // –®–∞–≥ 4: –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ (–Ω–µ –¥–æ–ª–∂–Ω–æ –ø–∞–¥–∞—Ç—å)
        log('–®–∞–≥ 4: –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ...', 'info');
        try {
          compDestroy.destroy(); // –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤
          log('‚úÖ –®–∞–≥ 4: –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ destroy() –Ω–µ –≤—ã–∑–≤–∞–ª–æ –æ—à–∏–±–æ–∫', 'success');
        } catch (e) {
          throw new Error('–ü–æ–≤—Ç–æ—Ä–Ω–æ–µ destroy() –Ω–µ –¥–æ–ª–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–æ–∫');
        }

        log('=== –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 4: –£—Å–ø–µ—à–Ω–æ ===', 'success');
        $('#test-result-4').removeClass('pending').addClass('pass')
          .text('‚úÖ –ê–≤—Ç–æ-—Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω');

      } catch (error) {
        log(`‚ùå –ê–≤—Ç–æ-—Ç–µ—Å—Ç –ø—Ä–æ–≤–∞–ª–µ–Ω: ${error.message}`, 'error');
        $('#test-result-4').removeClass('pending').addClass('fail')
          .text(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`);
      } finally {
        $btn.prop('disabled', false).text('‚ñ∂Ô∏è –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 4');
        testRunning = false;
      }
    });

    // ============================================================
    // –ê–í–¢–û-–¢–ï–°–¢ –°–ï–ö–¶–ò–ò 5
    // ============================================================

    $('#btn-auto-test-section-5').on('click', async function () {
      if (testRunning) return;
      testRunning = true;

      const $btn = $(this);
      $btn.prop('disabled', true).text('‚è≥ –¢–µ—Å—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...');

      try {
        log('=== –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 5: –ù–∞—á–∞–ª–æ ===', 'info');

        const compRecovery = $('#form-recovery').data('modia-component');

        // –®–∞–≥ 1: –í–∞–ª–∏–¥–∞—Ü–∏—è —Å –æ—à–∏–±–∫–∞–º–∏
        log('–®–∞–≥ 1: –í–∞–ª–∏–¥–∞—Ü–∏—è —Å –æ—à–∏–±–∫–∞–º–∏...', 'info');
        $('#recovery-name').val('');
        $('#recovery-email').val('');
        if (compRecovery) compRecovery.refreshRules();
        await sleep(300);

        const isValid1 = compRecovery.validate();
        if (!isValid1) {
          log('‚úÖ –®–∞–≥ 1: –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏', 'success');
        } else {
          throw new Error('–ü—É—Å—Ç—ã–µ –ø–æ–ª—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã');
        }

        await sleep(500);

        // –®–∞–≥ 2: –û—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–æ–∫
        log('–®–∞–≥ 2: –û—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–æ–∫...', 'info');
        compRecovery.clearErrors();
        await sleep(300);
        log('‚úÖ –®–∞–≥ 2: –û—à–∏–±–∫–∏ –æ—á–∏—â–µ–Ω—ã', 'success');

        await sleep(500);

        // –®–∞–≥ 3: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
        log('–®–∞–≥ 3: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è...', 'info');
        $('#recovery-name').val('–ò–≤–∞–Ω');
        $('#recovery-email').val('ivan@example.com');
        await sleep(300);

        const isValid2 = compRecovery.validate();
        if (isValid2) {
          log('‚úÖ –®–∞–≥ 3: –í–∞–ª–∏–¥–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞', 'success');
        } else {
          throw new Error('–ó–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã');
        }

        log('=== –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 5: –£—Å–ø–µ—à–Ω–æ ===', 'success');
        $('#test-result-5').removeClass('pending').addClass('pass')
          .text('‚úÖ –ê–≤—Ç–æ-—Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω');

      } catch (error) {
        log(`‚ùå –ê–≤—Ç–æ-—Ç–µ—Å—Ç –ø—Ä–æ–≤–∞–ª–µ–Ω: ${error.message}`, 'error');
        $('#test-result-5').removeClass('pending').addClass('fail')
          .text(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`);
      } finally {
        $btn.prop('disabled', false).text('‚ñ∂Ô∏è –ê–≤—Ç–æ-—Ç–µ—Å—Ç —Å–µ–∫—Ü–∏–∏ 5');
        testRunning = false;
      }
    });

    // ============================================================
    // –ì–õ–û–ë–ê–õ–¨–ù–´–ô –ê–í–¢–û-–¢–ï–°–¢
    // ============================================================

    $('#btn-auto-test-all').on('click', async function () {
      if (testRunning) return;
      testRunning = true;

      const $btn = $(this);
      $btn.prop('disabled', true).text('‚è≥ –¢–µ—Å—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...');

      log('=== –ì–õ–û–ë–ê–õ–¨–ù–´–ô –ê–í–¢–û-–¢–ï–°–¢: –ù–∞—á–∞–ª–æ ===', 'info');

      await $('#btn-auto-test-section-1').click();
      await sleep(1000);
      await $('#btn-auto-test-section-2').click();
      await sleep(1000);
      await $('#btn-auto-test-section-3').click();
      await sleep(1000);
      await $('#btn-auto-test-section-4').click();
      await sleep(1000);
      await $('#btn-auto-test-section-5').click();

      log('=== –ì–õ–û–ë–ê–õ–¨–ù–´–ô –ê–í–¢–û-–¢–ï–°–¢: –ó–∞–≤–µ—Ä—à—ë–Ω ===', 'success');

      $btn.prop('disabled', false).text('‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ-—Ç–µ—Å—Ç –≤—Å–µ—Ö —Å–µ–∫—Ü–∏–π');
      testRunning = false;
    });

    // ============================================================
    // –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –õ–û–ì–ê
    // ============================================================

    $('#btn-copy-log').on('click', function (e) {
      e.preventDefault();
      copyLogToClipboard();
    });

    $('#btn-clear-log').on('click', function () {
      $('#console-log').html('<div class="text-muted"><small>[00:00:00] –õ–æ–≥ –æ—á–∏—â–µ–Ω</small></div>');
      log('–õ–æ–≥ –æ—á–∏—â–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º', 'info');
    });

    // ============================================================
    // –ì–õ–û–ë–ê–õ–¨–ù–´–ô –û–ë–†–ê–ë–û–¢–ß–ò–ö –û–®–ò–ë–û–ö
    // ============================================================

    window.addEventListener('error', function (e) {
      log(`‚ùå –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞: ${e.message} –≤ ${e.filename}:${e.lineno}`, 'error');
    });

    window.addEventListener('unhandledrejection', function (e) {
      log(`‚ùå –ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è Promise-–æ—à–∏–±–∫–∞: ${e.reason}`, 'error');
    });
  </script>
</body>

</html>