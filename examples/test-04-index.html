<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <title>Modia ‚Äî –¢–µ—Å—Ç Index (–ü—É–±–ª–∏—á–Ω—ã–π API)</title>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="../modia/modia.css">
</head>

<body>
  <!-- ‚ö†Ô∏è –ù–ï–¢ data-modia-* –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –Ω–∞ body ‚Äî —Ç–µ—Å—Ç–∏—Ä—É–µ–º —á–∏—Å—Ç—ã–π —Ä–µ–∂–∏–º -->

  <div class="container mt-5">
    <h1>üß™ –¢–µ—Å—Ç Index (–ü—É–±–ª–∏—á–Ω—ã–π API)</h1>
    <p class="lead">–ü—Ä–æ–≤–µ—Ä–∫–∞: window.Modia API, –∞–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –≤–µ—Ä—Å–∏—è.</p>

    <div class="alert alert-info mt-3">
      <strong>üìç Debug —Ä–µ–∂–∏–º:</strong> <span id="debug-status">–ù–µ –∞–∫—Ç–∏–≤–µ–Ω</span>
    </div>

    <form data-component="validation" class="mt-4">
      <div class="form-group">
        <label>Email:</label>
        <input type="email" class="form-control" name="email" required>
      </div>
      <button type="submit" class="btn btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </form>

    <div class="test-buttons mt-4">
      <button id="test-version" class="btn btn-info mr-2">üìå version</button>
      <button id="test-scan" class="btn btn-success mr-2">üîÑ scan()</button>
      <button id="test-log" class="btn btn-warning mr-2">üìù log()</button>
      <button id="test-debug" class="btn btn-primary">üêõ debug API</button>
    </div>

    <div id="api-output" class="mt-4 p-3 bg-light border rounded"></div>

    <hr class="my-5">
    <h3>‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</h3>
    <ul>
      <li><code>window.Modia</code> –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏</li>
      <li><code>Modia.version</code> = '1.2.0'</li>
      <li><code>Modia.scan()</code> —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º root</li>
      <li><code>Modia.log()</code> –ø–∏—à–µ—Ç –≤ –∫–æ–Ω—Å–æ–ª—å –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ</li>
      <li><code>Modia.debug.*</code> API —Ä–∞–±–æ—Ç–∞–µ—Ç</li>
      <li>–ê–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–¥–∏–Ω —Ä–∞–∑</li>
    </ul>

    <h3>üîó –°—Å—ã–ª–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</h3>
    <div class="mt-3">
      <a href="test-04-index.html" class="btn btn-secondary mr-2">–ë–µ–∑ —Ä–µ–∂–∏–º–∞</a>
      <a href="test-04-index.html?modia-log" class="btn btn-success mr-2">?modia-log</a>
      <a href="test-04-index.html?modia-debug" class="btn btn-primary">?modia-debug</a>
    </div>
  </div>

  <script type="module">
    import '../modia/index.js';

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ debug
    function updateDebugStatus() {
      const enabled = Modia.debug.isEnabled();
      const mode = Modia.debug.getMode();
      $('#debug-status').text(`${mode || '–ù–µ –∞–∫—Ç–∏–≤–µ–Ω'} (${enabled ? 'ON' : 'OFF'})`);
    }

    $('#test-version').on('click', () => {
      $('#api-output').html(`<div>version: <strong>${Modia.version}</strong></div>`);
      Modia.info(`version = ${Modia.version}`, 'Test-04');
    });

    $('#test-scan').on('click', () => {
      const instances = Modia.scan();
      $('#api-output').html(`<div>scan() –Ω–∞—à—ë–ª: <strong>${instances.length}</strong> –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</div>`);
      Modia.info(`scan() = ${instances.length} –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤`, 'Test-04');
    });

    $('#test-log').on('click', () => {
      Modia.log('–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ', 'info', 'Test-04');
      Modia.info('Info —Å–æ–æ–±—â–µ–Ω–∏–µ', 'Test-04');
      Modia.warn('Warn —Å–æ–æ–±—â–µ–Ω–∏–µ', 'Test-04');
      Modia.error('Error —Å–æ–æ–±—â–µ–Ω–∏–µ', 'Test-04');
      Modia.success('Success —Å–æ–æ–±—â–µ–Ω–∏–µ', 'Test-04');
      $('#api-output').html('<div>5 —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ</div>');
    });

    $('#test-debug').on('click', () => {
      const output = `
        <div>isEnabled(): <strong>${Modia.debug.isEnabled()}</strong></div>
        <div>getMode(): <strong>${Modia.debug.getMode() || 'null'}</strong></div>
        <div>Registry: <strong>${Modia.debug.getComponentsRegistry().length}</strong> –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</div>
      `;
      $('#api-output').html(output);
      updateDebugStatus();
    });

    // –ê–≤—Ç–æ-—Ç–µ—Å—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    $(document).on('modia:initialized', (e, data) => {
      Modia.success(`modia:initialized ‚Äî ${data.instances.length} –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤`, 'Test-04');
      updateDebugStatus();
      console.log('‚úÖ Index API –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ');
    });
  </script>
</body>

</html>